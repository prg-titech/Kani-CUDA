package Expression;

import java.io.*;

public class Main {
		public static void main(String[] args){
			try{
				File file = new File("/Users/akira/masuhara-lab/kani-cuda/Kani-CUDA/Examples/Matrixmultiply/profile");
				
				if(file.exists()){
					FileReader fr = new FileReader(file);
					BufferedReader br = new BufferedReader(fr);
					String data = br.readLine();
					String[] vars = data.split(" ");
					Environment env = new Environment(vars);
					
					//desired: trow * bdimx + k
					Expression trow = new Variable("trow");
					Expression bdimx = new Variable("bdimx");
					Expression k = new Variable("k");
					Expression exp = trow.multiple(bdimx).plus(k);
					exp.print();
					
					while ((data = br.readLine()) != null) {
						env.setVal(vars, data.split(" "));
						System.out.println(exp.eval(env));
					}
					fr.close();
				}
			} catch (IOException e) {
				e.printStackTrace();
			}		
		}	
}
